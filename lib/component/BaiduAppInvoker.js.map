{"version":3,"sources":["component/BaiduAppInvoker.js"],"names":["type","level","ACTION_MAP","voice","login","share","create","show","url","props","BaiduAppInvoker","args","id","componentDidMount","action","initGraph","componentWillReceiveProps","nextProps","needReturn","category","stat","ready","render","top","left","width","height","propTypes","oneOf","isRequired"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAmBO,QAAMA,sBAAO,iBAAb;AACA,QAAMC,qDAAN;;AAEP,QAAMC,aAAa;AACfC,0CADe;AAEfC,iCAFe;AAGfC,aAHe,mBAGP;AACJ,+BAAMC,MAAN,GAAeC,IAAf;AACH,SALc;AAMfC,WANe,eAMXC,KANW,EAMJ;AACP,sCAAQA,MAAMD,GAAd;AACH;AARc,KAAnB;;QAWaE,e,WAAAA,e;;;AAET,mCAAqB;AAAA;;AAAA,8CAANC,IAAM;AAANA,oBAAM;AAAA;;AAAA,qEACjB,gDAASA,IAAT,EADiB;;AAEjB,kBAAKC,EAAL,oBAAyB,wBAAzB;AAFiB;AAGpB;;kCAEDC,iB,gCAAoB;;AAEhB,gBAAI,KAAKJ,KAAL,CAAWK,MAAX,KAAsB,OAA1B,EAAmC;AAC/B,qBAAKC,SAAL,CAAe,KAAKH,EAApB,EAAwB,KAAKH,KAA7B;AACH;AAEJ,S;;kCAEDO,yB,sCAA0BC,S,EAAW;AACjC,gBAAIA,UAAUH,MAAV,KAAqB,OAArB,IAAgC,KAAKL,KAAL,CAAWK,MAAX,KAAsB,OAA1D,EAAmE;AAC/D,qBAAKC,SAAL,CAAe,KAAKH,EAApB,EAAwBK,SAAxB;AACH;AACJ,S;;kCAEDF,S,sBAAUH,E,EAAIH,K,EAAO;AAAA,gBAGbS,UAHa,GAMbT,KANa,CAGbS,UAHa;AAAA,gBAIbC,QAJa,GAMbV,KANa,CAIbU,QAJa;AAAA,gBAKbC,IALa,GAMbX,KANa,CAKbW,IALa;;;AAQjB,kCAAMC,KAAN,CAAY;AAAA,uBAAM,sBAAMN,SAAN,CAAgB;AAC9BH,0BAD8B;AAE9BZ,0BAAMmB,QAFwB;AAG9BD,0CAH8B;AAI9BE;AAJ8B,iBAAhB,CAAN;AAAA,aAAZ;AAOH,S;;kCAEDE,M,qBAAS;;AAEL,gBAAMb,QAAQ,KAAKA,KAAnB;;AAFK,gBAKDc,GALC,GAUDd,KAVC,CAKDc,GALC;AAAA,gBAMDC,IANC,GAUDf,KAVC,CAMDe,IANC;AAAA,gBAODC,KAPC,GAUDhB,KAVC,CAODgB,KAPC;AAAA,gBAQDC,MARC,GAUDjB,KAVC,CAQDiB,MARC;AAAA,gBASDZ,MATC,GAUDL,KAVC,CASDK,MATC;;;AAYL,mBACI;AACI,oBAAI,KAAKF,EADb;AAEI,8BAAY,oCAFhB;AAGI,2BAAU,wBAHd;AAII,uBAAO;AACHW,yBAAK,kBAAOA,GAAP,CADF;AAEHC,0BAAM,kBAAOA,IAAP,CAFH;AAGHC,2BAAO,kBAAOA,KAAP,CAHJ;AAIHC,4BAAQ,kBAAOA,MAAP;AAJL,iBAJX;AAUI,yBAAS,mBAAM;;AAEX,wBAAIxB,WAAWY,MAAX,CAAJ,EAAwB;AACpBZ,mCAAWY,MAAX,EAAmBL,KAAnB;AACH;AAEJ,iBAhBL,GADJ;AAmBH,S;;;;;AAILC,oBAAgBV,IAAhB,GAAuBA,IAAvB;;AAEAU,oBAAgBiB,SAAhB,GAA4B;AACxBb,gBAAQ,iBAAUc,KAAV,CAAgB,CACpB,OADoB,EAEpB,OAFoB,EAGpB,OAHoB,EAIpB,OAJoB,EAKpB,KALoB,CAAhB,EAMLC;AAPqB,KAA5B;;yBAUe,gCAAkB7B,IAAlB,EAAwBU,eAAxB,C","file":"BaiduAppInvoker.js","sourcesContent":["/**\n * @file 唤起手百按钮\n * @author leon <ludafa@outlook.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\nimport {registerComponent} from '../util/factory';\nimport {px2rem} from '../util/unit';\nimport {EDITOR_HELPER_ATOM} from '../constants';\n\nimport 'mms-js-sdk/lib/aio';\nimport voiceSearch from 'mms-js-sdk/invoker/invokeVoiceAll';\nimport login from 'mms-js-sdk/invoker/login';\nimport share from 'mms-js-sdk/invoker/share';\nimport openUrl from 'mms-js-sdk/invoker/openUrl';\nimport graph from 'graph-sdk';\n\nimport guid from '../common/guid';\n\nexport const type = 'BaiduAppInvoker';\nexport const level = EDITOR_HELPER_ATOM;\n\nconst ACTION_MAP = {\n    voice: voiceSearch,\n    login,\n    share() {\n        share.create().show();\n    },\n    url(props) {\n        openUrl(props.url);\n    }\n};\n\nexport class BaiduAppInvoker extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.id = `app-invoker-${guid()}`;\n    }\n\n    componentDidMount() {\n\n        if (this.props.action === 'graph') {\n            this.initGraph(this.id, this.props);\n        }\n\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.action === 'graph' && this.props.action !== 'graph') {\n            this.initGraph(this.id, nextProps);\n        }\n    }\n\n    initGraph(id, props) {\n\n        const {\n            needReturn,\n            category,\n            stat\n        } = props;\n\n        graph.ready(() => graph.initGraph({\n            id,\n            type: category,\n            needReturn,\n            stat\n        }));\n\n    }\n\n    render() {\n\n        const props = this.props;\n\n        const {\n            top,\n            left,\n            width,\n            height,\n            action\n        } = props;\n\n        return (\n            <div\n                id={this.id}\n                data-click={'{\"mod\":\"invoker\",\"act\":\"a_invoke\"}'}\n                className=\"mola-baidu-app-invoker\"\n                style={{\n                    top: px2rem(top),\n                    left: px2rem(left),\n                    width: px2rem(width),\n                    height: px2rem(height)\n                }}\n                onClick={() => {\n\n                    if (ACTION_MAP[action]) {\n                        ACTION_MAP[action](props);\n                    }\n\n                }} />\n        );\n    }\n\n}\n\nBaiduAppInvoker.type = type;\n\nBaiduAppInvoker.propTypes = {\n    action: PropTypes.oneOf([\n        'graph',\n        'voice',\n        'login',\n        'share',\n        'url'\n    ]).isRequired\n};\n\nexport default registerComponent(type)(BaiduAppInvoker);\n"]}