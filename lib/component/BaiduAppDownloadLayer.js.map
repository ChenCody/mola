{"version":3,"sources":["component/BaiduAppDownloadLayer.js"],"names":["type","level","URL_BOX_ITUNES","URL_YINGYONGBAO","URL_BOX_THIRD_PARTY","URL_WEIBO_IOS","URL_WEIBO_ANDROID","DownloadGuide","args","state","open","baidu","weiboOpen","showWeiboLayer","bind","e","preventDefault","setState","renderWeiboLayer","image","ios","backgroundImage","render","props","className","style","title","subTitle","href","onClick","weibo","weixin","propTypes","string","isRequired"],"mappings":";;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;AAWO,QAAMA,sBAAO,eAAb;AACA,QAAMC,sDAAN;;AAEP;;;;;;AAMA,QAAMC,iBAAiB,mFAAvB;;AAEA,QAAMC,kBAAkB,8DAAxB;;AAEA,QAAMC,sBAAsB,6CAA5B;;AAEA,QAAMC,gBAAgB,qIAAtB;;AAEA,QAAMC,oBAAoB,qIAA1B;;QAEaC,a,WAAAA,a;;;AAET,iCAAqB;AAAA;;AAAA,8CAANC,IAAM;AAANA,oBAAM;AAAA;;AAAA,qEACjB,gDAASA,IAAT,EADiB;;AAEjB,kBAAKC,KAAL,GAAa;AACTC,sBAAM,CAAC,aAAQC,KADN;AAETC,2BAAW;AAFF,aAAb;AAIA,kBAAKC,cAAL,GAAsB,MAAKA,cAAL,CAAoBC,IAApB,OAAtB;AANiB;AAOpB;;gCAEDD,c,2BAAeE,C,EAAG;AACdA,cAAEC,cAAF;AACA,iBAAKC,QAAL,CAAc,EAACL,WAAW,IAAZ,EAAd;AACH,S;;gCAEDM,gB,+BAAmB;AAAA;;AACf,gBAAI,CAAC,KAAKT,KAAL,CAAWG,SAAhB,EAA2B;AACvB,uBAAO,IAAP;AACH;AACD,gBAAIO,QAAQ,QAAGC,GAAH,GAASf,aAAT,GAAyBC,iBAArC;AACA,mBACI;AACI,uBAAO,EAACe,0BAAwBF,KAAxB,MAAD,EADX;AAEI,yBAAS;AAAA,2BAAM,OAAKF,QAAL,CAAc,EAACL,WAAW,KAAZ,EAAd,CAAN;AAAA,iBAFb,GADJ;AAKH,S;;gCAEDU,M,qBAAS;AAAA;;AAEL,gBAAI,CAAC,KAAKb,KAAL,CAAWC,IAAhB,EAAsB;AAClB,uBAAO,IAAP;AACH;;AAJI,yBAWD,KAAKa,KAXJ;AAAA,0CAODC,SAPC;AAAA,gBAODA,SAPC,oCAOW,IAPX;AAAA,sCAQDC,KARC;AAAA,gBAQDA,KARC,gCAQO,IARP;AAAA,gBASDC,KATC,UASDA,KATC;AAAA,gBAUDC,QAVC,UAUDA,QAVC;;;AAaL,gBAAIC,OAAO,EAAX;AACA,gBAAIC,UAAU,IAAd;;AAEA;AACA,gBAAI,aAAQC,KAAZ,EAAmB;AACfD,0BAAU,KAAKhB,cAAf;AACH;AACD;AAHA,iBAIK,IAAI,aAAQkB,MAAZ,EAAoB;AACrBH,2BAAOzB,eAAP;AACH;AACD;AAHK,qBAIA;AACDyB,+BAAO,QAAGR,GAAH,GAASlB,cAAT,GAA0BE,mBAAjC;AACH;;AAED,mBACI;AAAA;AAAA;AACI,kCAAY,0BADhB;AAEI,+BAAW,6BAAG,+BAAH,EAAoCoB,SAApC,CAFf;AAGI,2BAAOC,KAHX;AAII;AAAA;AAAA;AACI,sCAAY,mCADhB;AAEI,iCAAS;AAAA,mCAAM,OAAKR,QAAL,CAAc,EAACP,MAAM,KAAP,EAAd,CAAN;AAAA,yBAFb;AAAA;AAAA,iBAJJ;AAOI,2DAPJ;AAQI;AAAA;AAAA;AACI;AAAA;AAAA;AAAKgB;AAAL,qBADJ;AAEI;AAAA;AAAA;AAAIC;AAAJ;AAFJ,iBARJ;AAYI;AAAA;AAAA;AACI,8BAAMC,IADV;AAEI,sCAAY,sBAFhB;AAGI,iCAASC,OAHb;AAAA;AAAA,iBAZJ;AAgBK,qBAAKX,gBAAL;AAhBL,aADJ;AAoBH,S;;;;;AAILX,kBAAcN,KAAd,GAAsBA,KAAtB;AACAM,kBAAcP,IAAd,GAAqBA,IAArB;;AAEAO,kBAAcyB,SAAd,GAA0B;AACtBN,eAAO,iBAAUO,MAAV,CAAiBC,UADF;AAEtBP,kBAAU,iBAAUM,MAAV,CAAiBC;AAFL,KAA1B;;yBAKe,gCAAkBlC,IAAlB,EAAwBO,aAAxB,C","file":"BaiduAppDownloadLayer.js","sourcesContent":["/**\n * @file 手百下载组件\n * @author leon <ludafa@outlook.com>\n */\n\nimport React, {Component, PropTypes} from 'react';\nimport {registerComponent} from '../util/factory';\nimport {EDITOR_HELPER_FIXED} from '../constants';\nimport cx from 'classnames';\nimport {os, browser} from '../common/env';\n\nexport const type = 'DownloadGuide';\nexport const level = EDITOR_HELPER_FIXED;\n\n/**\n * h5: ios => 打开 appstore (universal link)；安卓：打开xbox.m.baidu.com\n * 微信：ios => 打开 appstore (universal link)；安卓：打开应用宝\n * 微博：在浏览器中打开\n */\n\nconst URL_BOX_ITUNES = 'itms-apps://itunes.apple.com/cn/app/shou-ji-bai-du-xiao-shuo-zui/id382201985?mt=8';\n\nconst URL_YINGYONGBAO = 'http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.searchbox';\n\nconst URL_BOX_THIRD_PARTY = 'http://xbox.m.baidu.com/mo/home?redirect=mo';\n\nconst URL_WEIBO_IOS = 'http://boscdn.bpc.baidu.com/mms-res/fFhO6IiQ0WjMZUPi9VZIBVZ3BVALBcRSBWCb9VlWZVAb0mAwBmZIhpRenFvkrUgquWgquQXRfFSvrUCRBmhqZIkLZWh.png';\n\nconst URL_WEIBO_ANDROID = 'http://boscdn.bpc.baidu.com/mms-res/fFhO6IXiBVXWBIni9VhahIs3BCsquQRMZUjR9UjYhRZq0kVIBVBC0dRenFvkrUgquWgquQXRfFSvrUCRBmhqZIgMuWs.png';\n\nexport class DownloadGuide extends Component {\n\n    constructor(...args) {\n        super(...args);\n        this.state = {\n            open: !browser.baidu,\n            weiboOpen: false\n        };\n        this.showWeiboLayer = this.showWeiboLayer.bind(this);\n    }\n\n    showWeiboLayer(e) {\n        e.preventDefault();\n        this.setState({weiboOpen: true});\n    }\n\n    renderWeiboLayer() {\n        if (!this.state.weiboOpen) {\n            return null;\n        }\n        let image = os.ios ? URL_WEIBO_IOS : URL_WEIBO_ANDROID;\n        return (\n            <div\n                style={{backgroundImage: `url(${image})`}}\n                onClick={() => this.setState({weiboOpen: false})} />\n        );\n    }\n\n    render() {\n\n        if (!this.state.open) {\n            return null;\n        }\n\n        let {\n            className = null,\n            style = null,\n            title,\n            subTitle\n        } = this.props;\n\n        let href = '';\n        let onClick = null;\n\n        // 微博：弹出浮层『在浏览器中打开』\n        if (browser.weibo) {\n            onClick = this.showWeiboLayer;\n        }\n        // 微信：打开应用宝\n        else if (browser.weixin) {\n            href = URL_YINGYONGBAO;\n        }\n        // h5: ios => 打开 appstore (universal link)；安卓：打开xbox.m.baidu.com\n        else {\n            href = os.ios ? URL_BOX_ITUNES : URL_BOX_THIRD_PARTY;\n        }\n\n        return (\n            <div\n                data-click={'{\"mod\":\"download_layer\"}'}\n                className={cx('mola-baidu-app-download-layer', className)}\n                style={style}>\n                <i\n                    data-click={'{\"act\": \"b_close_download_layer\"}'}\n                    onClick={() => this.setState({open: false})}>x</i>\n                <b />\n                <section>\n                    <h4>{title}</h4>\n                    <p>{subTitle}</p>\n                </section>\n                <a\n                    href={href}\n                    data-click={'{\"act\":\"a_download\"}'}\n                    onClick={onClick}>下载体验</a>\n                {this.renderWeiboLayer()}\n            </div>\n        );\n    }\n\n}\n\nDownloadGuide.level = level;\nDownloadGuide.type = type;\n\nDownloadGuide.propTypes = {\n    title: PropTypes.string.isRequired,\n    subTitle: PropTypes.string.isRequired\n};\n\nexport default registerComponent(type)(DownloadGuide);\n"]}